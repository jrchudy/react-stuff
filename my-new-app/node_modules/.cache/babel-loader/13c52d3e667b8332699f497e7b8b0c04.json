{"ast":null,"code":"import _slicedToArray from\"/Users/jchudy/workspace/react-stuff/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RecordsetTable=function RecordsetTable(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),referenceLoaded=_useState2[0],setReferenceLoaded=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),reference=_useState4[0],setReference=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),pageLoaded=_useState6[0],setPageLoaded=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),page=_useState8[0],setPage=_useState8[1];var dispatch=useDispatch();// gets the named reducer from the store, see redux/store\nvar referenceStore=useSelector(function(state){return state.reference;});// component mounted\nuseEffect(function(){// do nothing currently since has to wait for reference to resolve\nconsole.log(\"Recordset Table mounted\");},[]);// when reference store variable is set or changes, set loaded true\nuseEffect(function(){if(referenceStore){if(referenceStore.reference&&referenceStore.reference!=reference){setReference(referenceStore.reference);setReferenceLoaded(true);}if(referenceStore.page&&referenceStore.page!=page){setPage(referenceStore.page);setPageLoaded(true);}}},[referenceStore,dispatch]);var renderActionHeader=function renderActionHeader(){if(referenceLoaded){return/*#__PURE__*/_jsx(\"th\",{className:\"actions-header\",children:\"Actions\"});}};var renderColumnHeaders=function renderColumnHeaders(){if(referenceLoaded){return reference.columns.map(function(column,index){// how to add conditional class/tooltip\n// ng-class=\"{'chaise-icon-for-tooltip': col.column.comment}\"\nvar columnName=column.displayname.value;return/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"table-column-displayname\",\"tooltip-placement\":\"auto top\",children:column.displayname.isHTML?/*#__PURE__*/_jsx(\"span\",{dangerouslySetInnerHTML:{__html:columnName}}):/*#__PURE__*/_jsx(\"span\",{children:columnName})})},index);});}};var handleViewClick=function handleViewClick(target){if(!target.value){target=target.parentElement;}console.log(target.value);// change view to record with different RID\n// window.location =\n};var renderTableData=function renderTableData(){if(pageLoaded){return page.tuples.map(function(tuple,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"action-btns\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"chaise-btn-group\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"view-action-btn chaise-btn chaise-btn-tertiary chaise-btn-link icon-btn\",value:tuple.data.RID,onClick:function onClick(event){return handleViewClick(event.target);},children:/*#__PURE__*/_jsx(\"span\",{className:\"chaise-btn-icon chaise-icon chaise-view-details\"})}),\"// \",/*#__PURE__*/_jsx(\"button\",{className:\"edit-action-btn chaise-btn chaise-btn-tertiary chaise-btn-link icon-btn\",children:/*#__PURE__*/_jsx(\"span\",{className:\"chaise-btn-icon glyphicon glyphicon-pencil\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"delete-action-btn chaise-btn chaise-btn-tertiary chaise-btn-link icon-btn\",children:/*#__PURE__*/_jsx(\"span\",{className:\"chaise-btn-icon far fa-trash-alt\"})})]})}),renderTableCell(tuple)]},index);});}};var renderTableCell=function renderTableCell(tuple){return tuple.values.map(function(value,index){var isHTML=tuple.isHTML[index];return/*#__PURE__*/_jsx(\"td\",{children:isHTML?/*#__PURE__*/_jsx(\"span\",{className:\"markdown-container\",dangerouslySetInnerHTML:{__html:value}}):/*#__PURE__*/_jsx(\"span\",{children:value})},index);});};return/*#__PURE__*/_jsx(\"div\",{className:\"outer-table recordset-table\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table chaise-table table-striped table-hover\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"table-heading\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[renderActionHeader(),renderColumnHeaders()]})}),/*#__PURE__*/_jsx(\"tbody\",{children:renderTableData()})]})});};export default RecordsetTable;","map":{"version":3,"sources":["/Users/jchudy/workspace/react-stuff/my-app/src/components/RecordsetTable.js"],"names":["React","useEffect","useState","useDispatch","useSelector","RecordsetTable","props","referenceLoaded","setReferenceLoaded","reference","setReference","pageLoaded","setPageLoaded","page","setPage","dispatch","referenceStore","state","console","log","renderActionHeader","renderColumnHeaders","columns","map","column","index","columnName","displayname","value","isHTML","__html","handleViewClick","target","parentElement","renderTableData","tuples","tuple","data","RID","event","renderTableCell","values"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nconst RecordsetTable = (props) => {\n    const [referenceLoaded, setReferenceLoaded]     = useState(false);\n    const [reference, setReference]                 = useState(null);\n    const [pageLoaded, setPageLoaded]               = useState(false);\n    const [page, setPage]                           = useState(null);\n\n    const dispatch = useDispatch();\n    // gets the named reducer from the store, see redux/store\n    const referenceStore = useSelector(state => state.reference);\n\n    // component mounted\n    useEffect(() => {\n        // do nothing currently since has to wait for reference to resolve\n        console.log(\"Recordset Table mounted\");\n    }, []);\n\n    // when reference store variable is set or changes, set loaded true\n    useEffect(() => {\n        if (referenceStore) {\n            if (referenceStore.reference && referenceStore.reference != reference) {\n                setReference(referenceStore.reference);\n                setReferenceLoaded(true);\n            }\n\n            if (referenceStore.page && referenceStore.page != page) {\n                setPage(referenceStore.page);\n                setPageLoaded(true);\n            }\n        }\n    }, [referenceStore, dispatch]);\n\n    const renderActionHeader = () => {\n        if (referenceLoaded) {\n            return (<th className=\"actions-header\">Actions</th>)\n        }\n    }\n\n    const renderColumnHeaders = () => {\n        if (referenceLoaded) {\n            return reference.columns.map((column, index) => {\n                // how to add conditional class/tooltip\n                // ng-class=\"{'chaise-icon-for-tooltip': col.column.comment}\"\n                var columnName = column.displayname.value;\n                return (<th key={index}>\n                    <span className=\"table-column-displayname\" tooltip-placement=\"auto top\">\n                      {column.displayname.isHTML\n                          ? <span dangerouslySetInnerHTML={{ __html: columnName }}></span>\n                          : <span>{columnName}</span>\n                      }\n                    </span>\n                  </th>)\n            });\n        }\n    }\n\n    const handleViewClick = (target) => {\n        if (!target.value) {\n            target = target.parentElement;\n        }\n        console.log(target.value);\n\n        // change view to record with different RID\n        // window.location =\n    }\n\n    const renderTableData = () => {\n        if (pageLoaded) {\n            return page.tuples.map((tuple, index) => {\n               return (<tr key={index}>\n                   <td className=\"action-btns\">\n                      <div className=\"chaise-btn-group\">\n                          <button className=\"view-action-btn chaise-btn chaise-btn-tertiary chaise-btn-link icon-btn\" value={tuple.data.RID} onClick={event => handleViewClick(event.target)}><span className=\"chaise-btn-icon chaise-icon chaise-view-details\"></span></button>\n                          // <button className=\"edit-action-btn chaise-btn chaise-btn-tertiary chaise-btn-link icon-btn\"><span className=\"chaise-btn-icon glyphicon glyphicon-pencil\"></span></button>\n                          <button className=\"delete-action-btn chaise-btn chaise-btn-tertiary chaise-btn-link icon-btn\"><span className=\"chaise-btn-icon far fa-trash-alt\"></span></button>\n                      </div>\n                   </td>\n                   {renderTableCell(tuple)}\n                 </tr>)\n            });\n        }\n    }\n\n    const renderTableCell = (tuple) => {\n        return tuple.values.map((value, index) => {\n            const isHTML = tuple.isHTML[index];\n            return (<td key={index}>\n                {isHTML\n                    ? <span className=\"markdown-container\" dangerouslySetInnerHTML={{ __html: value }}></span>\n                    : <span>{value}</span>\n                }\n            </td>)\n        });\n    }\n\n    return(<div className=\"outer-table recordset-table\">\n        <table className=\"table chaise-table table-striped table-hover\">\n            <thead className=\"table-heading\">\n                <tr>\n                    {renderActionHeader()}\n                    {renderColumnHeaders()}\n                </tr>\n            </thead>\n            <tbody>{renderTableData()}</tbody>\n        </table>\n    </div>);\n}\n\nexport default RecordsetTable;\n"]},"metadata":{},"sourceType":"module"}