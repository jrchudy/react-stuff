{"ast":null,"code":"import _slicedToArray from\"/Users/jchudy/workspace/react-stuff/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TableHeader=function TableHeader(props){var _useState=useState(25),_useState2=_slicedToArray(_useState,2),selectedPageLimit=_useState2[0],setSelectedPageLimit=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoaded=_useState4[0],setIsLoaded=_useState4[1];var _useState5=useState('XXX'),_useState6=_slicedToArray(_useState5,2),aggCount=_useState6[0],setAggCount=_useState6[1];// const [reference, setReference]                 = useState(null);\n// is never going to change\nvar pageLimits=[10,25,50,75,100,200];var dispatch=useDispatch();// NOTE: whole state currently?\nvar reference=useSelector(function(state){return state.reference;});// component mounted\nuseEffect(function(){// do nothing currently since has to wait for reference to resolve\nconsole.log(\"Table header mounted\");},[]);// NOTE: replace with useEffect that watches reference store variable\n// when reference store variable is set or changes, make request to fetch agg count\nuseEffect(function(){if(reference.reference){reference.reference.getAggregates([reference.reference.aggregate.countAgg]).then(function(data){console.log(\"aggreggate count: \",data);setAggCount(data);}).catch(function(err){console.log(err);});}},[reference,dispatch]);var renderPageLimits=function renderPageLimits(){// <span className={\"glyphicon pull-right \" + this.state.selectedPageLimit === limit ? 'glyphicon-ok' : 'glyphicon-invisible'}></span>\nreturn pageLimits.map(function(limit,index){return/*#__PURE__*/_jsx(\"option\",{className:\"page-size-limit-${limit}\",children:limit},index);});};var handlePageLimitChange=function handlePageLimitChange(value){console.log(value);// dispatch to store that reference should be reread\n};// TODO: replace select\n// <span className=\"caret\"></span>\nreturn/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"span\",{children:[\"Displaying first \",/*#__PURE__*/_jsx(\"select\",{className:\"page-size-dropdown chaise-btn chaise-btn-secondary\",value:selectedPageLimit,onChange:function onChange(event){return handlePageLimitChange(event.target.value);},children:renderPageLimits()}),\" of \",aggCount,\" records\"]})});};export default TableHeader;","map":{"version":3,"sources":["/Users/jchudy/workspace/react-stuff/my-app/src/components/TableHeader.js"],"names":["React","useEffect","useState","useDispatch","useSelector","TableHeader","props","selectedPageLimit","setSelectedPageLimit","isLoaded","setIsLoaded","aggCount","setAggCount","pageLimits","dispatch","reference","state","console","log","getAggregates","aggregate","countAgg","then","data","catch","err","renderPageLimits","map","limit","index","handlePageLimitChange","value","event","target"],"mappings":"iKAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,C,wFAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,KAAD,CAAW,CAC3B,cAAkDJ,QAAQ,CAAC,EAAD,CAA1D,wCAAOK,iBAAP,eAA0BC,oBAA1B,eACA,eAAkDN,QAAQ,CAAC,KAAD,CAA1D,yCAAOO,QAAP,eAAiBC,WAAjB,eACA,eAAkDR,QAAQ,CAAC,KAAD,CAA1D,yCAAOS,QAAP,eAAiBC,WAAjB,eACA;AAEA;AACA,GAAMC,CAAAA,UAAU,CAAG,CAAC,EAAD,CAAK,EAAL,CAAS,EAAT,CAAa,EAAb,CAAiB,GAAjB,CAAsB,GAAtB,CAAnB,CAEA,GAAMC,CAAAA,QAAQ,CAAGX,WAAW,EAA5B,CACA;AACA,GAAMY,CAAAA,SAAS,CAAGX,WAAW,CAAC,SAAAY,KAAK,QAAIA,CAAAA,KAAK,CAACD,SAAV,EAAN,CAA7B,CAGA;AACAd,SAAS,CAAC,UAAM,CACZ;AACAgB,OAAO,CAACC,GAAR,CAAY,sBAAZ,EACH,CAHQ,CAGN,EAHM,CAAT,CAOA;AACA;AACAjB,SAAS,CAAC,UAAM,CACZ,GAAIc,SAAS,CAACA,SAAd,CAAyB,CACrBA,SAAS,CAACA,SAAV,CAAoBI,aAApB,CAAkC,CAACJ,SAAS,CAACA,SAAV,CAAoBK,SAApB,CAA8BC,QAA/B,CAAlC,EAA4EC,IAA5E,CAAiF,SAAUC,IAAV,CAAgB,CAC7FN,OAAO,CAACC,GAAR,CAAY,oBAAZ,CAAkCK,IAAlC,EAEAX,WAAW,CAACW,IAAD,CAAX,CACH,CAJD,EAIGC,KAJH,CAIS,SAAUC,GAAV,CAAe,CACpBR,OAAO,CAACC,GAAR,CAAYO,GAAZ,EACH,CAND,EAOH,CACJ,CAVQ,CAUN,CAACV,SAAD,CAAYD,QAAZ,CAVM,CAAT,CAYA,GAAMY,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,CAC3B;AACA,MAAOb,CAAAA,UAAU,CAACc,GAAX,CAAe,SAACC,KAAD,CAAQC,KAAR,CAAkB,CACpC,mBAAQ,eAAoB,SAAS,CAAE,0BAA/B,UAA4DD,KAA5D,EAAaC,KAAb,CAAR,CACH,CAFM,CAAP,CAGH,CALD,CAOA,GAAMC,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CAACC,KAAD,CAAW,CACrCd,OAAO,CAACC,GAAR,CAAYa,KAAZ,EACA;AACH,CAHD,CAKA;AACA;AACA,mBAAO,kCACH,yDAAuB,eAAQ,SAAS,CAAC,oDAAlB,CAAuE,KAAK,CAAExB,iBAA9E,CAAiG,QAAQ,CAAE,kBAAAyB,KAAK,QAAIF,CAAAA,qBAAqB,CAACE,KAAK,CAACC,MAAN,CAAaF,KAAd,CAAzB,EAAhH,UACtBL,gBAAgB,EADM,EAAvB,QAEcf,QAFd,cADG,EAAP,CAKH,CAvDD,CAyDA,cAAeN,CAAAA,WAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nconst TableHeader = (props) => {\n    const [selectedPageLimit, setSelectedPageLimit] = useState(25);\n    const [isLoaded, setIsLoaded]                   = useState(false);\n    const [aggCount, setAggCount]                   = useState('XXX');\n    // const [reference, setReference]                 = useState(null);\n\n    // is never going to change\n    const pageLimits = [10, 25, 50, 75, 100, 200];\n\n    const dispatch = useDispatch();\n    // NOTE: whole state currently?\n    const reference = useSelector(state => state.reference)\n\n\n    // component mounted\n    useEffect(() => {\n        // do nothing currently since has to wait for reference to resolve\n        console.log(\"Table header mounted\");\n    }, []);\n\n\n\n    // NOTE: replace with useEffect that watches reference store variable\n    // when reference store variable is set or changes, make request to fetch agg count\n    useEffect(() => {\n        if (reference.reference) {\n            reference.reference.getAggregates([reference.reference.aggregate.countAgg]).then(function (data) {\n                console.log(\"aggreggate count: \", data);\n\n                setAggCount(data);\n            }).catch(function (err) {\n                console.log(err)\n            });\n        }\n    }, [reference, dispatch]);\n\n    const renderPageLimits = () => {\n        // <span className={\"glyphicon pull-right \" + this.state.selectedPageLimit === limit ? 'glyphicon-ok' : 'glyphicon-invisible'}></span>\n        return pageLimits.map((limit, index) => {\n            return (<option key={index} className={\"page-size-limit-${limit}\"}>{limit}</option>)\n        })\n    }\n\n    const handlePageLimitChange = (value) => {\n        console.log(value)\n        // dispatch to store that reference should be reread\n    }\n\n    // TODO: replace select\n    // <span className=\"caret\"></span>\n    return(<div>\n        <span>Displaying first <select className=\"page-size-dropdown chaise-btn chaise-btn-secondary\" value={selectedPageLimit} onChange={event => handlePageLimitChange(event.target.value)}>\n        {renderPageLimits()}\n        </select> of {aggCount} records</span>\n    </div>);\n}\n\nexport default TableHeader;\n"]},"metadata":{},"sourceType":"module"}