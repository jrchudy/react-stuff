{"ast":null,"code":"import _slicedToArray from\"/Users/jchudy/workspace/react-stuff/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import store from'../redux/store';import{newPageSize}from'../redux/features/referenceSlice';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TableHeader=function TableHeader(props){var _useState=useState(25),_useState2=_slicedToArray(_useState,2),selectedPageLimit=_useState2[0],setSelectedPageLimit=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoaded=_useState4[0],setIsLoaded=_useState4[1];var _useState5=useState('XXX'),_useState6=_slicedToArray(_useState5,2),aggCount=_useState6[0],setAggCount=_useState6[1];// const [reference, setReference]                 = useState(null);\n// is never going to change\nvar pageLimits=[10,25,50,75,100,200];var dispatch=useDispatch();// NOTE: whole state currently?\nvar storedState=useSelector(function(state){return state.reference;});// component mounted\nuseEffect(function(){// do nothing currently since has to wait for reference to resolve\nconsole.log(\"Table header mounted\");},[]);// when reference store variable is set or changes, make request to fetch agg count\nuseEffect(function(){if(storedState&&storedState.reference){storedState.reference.getAggregates([storedState.reference.aggregate.countAgg]).then(function(data){console.log(\"aggreggate count: \",data);setAggCount(data[0]);}).catch(function(err){console.log(err);});}},[storedState,dispatch]);var renderPageLimits=function renderPageLimits(){// <span className={\"glyphicon pull-right \" + this.state.selectedPageLimit === limit ? 'glyphicon-ok' : 'glyphicon-invisible'}></span>\nreturn pageLimits.map(function(limit,index){return/*#__PURE__*/_jsx(\"option\",{className:\"page-size-limit-${limit}\",children:limit},index);});};var handlePageLimitChange=function handlePageLimitChange(value){// dispatch to store that reference should be reread\nstore.dispatch({type:\"reference/newPageSize\",pageSize:value});setSelectedPageLimit(value);};// TODO: replace select\n// <span className=\"caret\"></span>\nreturn/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"span\",{children:[\"Displaying first \",/*#__PURE__*/_jsx(\"select\",{className:\"page-size-dropdown chaise-btn chaise-btn-secondary\",value:selectedPageLimit,onChange:function onChange(event){return handlePageLimitChange(event.target.value);},children:renderPageLimits()}),\" of \",aggCount,\" records\"]})});};export default TableHeader;","map":{"version":3,"sources":["/Users/jchudy/workspace/react-stuff/my-app/src/components/TableHeader.js"],"names":["React","useEffect","useState","useDispatch","useSelector","store","newPageSize","TableHeader","props","selectedPageLimit","setSelectedPageLimit","isLoaded","setIsLoaded","aggCount","setAggCount","pageLimits","dispatch","storedState","state","reference","console","log","getAggregates","aggregate","countAgg","then","data","catch","err","renderPageLimits","map","limit","index","handlePageLimitChange","value","type","pageSize","event","target"],"mappings":"iKAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CAEA,MAAOC,CAAAA,KAAP,KAAkB,gBAAlB,CAEA,OAASC,WAAT,KAA4B,kCAA5B,C,wFAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,KAAD,CAAW,CAC3B,cAAkDN,QAAQ,CAAC,EAAD,CAA1D,wCAAOO,iBAAP,eAA0BC,oBAA1B,eACA,eAAkDR,QAAQ,CAAC,KAAD,CAA1D,yCAAOS,QAAP,eAAiBC,WAAjB,eACA,eAAkDV,QAAQ,CAAC,KAAD,CAA1D,yCAAOW,QAAP,eAAiBC,WAAjB,eACA;AAEA;AACA,GAAMC,CAAAA,UAAU,CAAG,CAAC,EAAD,CAAK,EAAL,CAAS,EAAT,CAAa,EAAb,CAAiB,GAAjB,CAAsB,GAAtB,CAAnB,CAEA,GAAMC,CAAAA,QAAQ,CAAGb,WAAW,EAA5B,CACA;AACA,GAAMc,CAAAA,WAAW,CAAGb,WAAW,CAAC,SAAAc,KAAK,QAAIA,CAAAA,KAAK,CAACC,SAAV,EAAN,CAA/B,CAGA;AACAlB,SAAS,CAAC,UAAM,CACZ;AACAmB,OAAO,CAACC,GAAR,CAAY,sBAAZ,EACH,CAHQ,CAGN,EAHM,CAAT,CAKA;AACApB,SAAS,CAAC,UAAM,CACZ,GAAIgB,WAAW,EAAIA,WAAW,CAACE,SAA/B,CAA0C,CACtCF,WAAW,CAACE,SAAZ,CAAsBG,aAAtB,CAAoC,CAACL,WAAW,CAACE,SAAZ,CAAsBI,SAAtB,CAAgCC,QAAjC,CAApC,EAAgFC,IAAhF,CAAqF,SAAUC,IAAV,CAAgB,CACjGN,OAAO,CAACC,GAAR,CAAY,oBAAZ,CAAkCK,IAAlC,EAEAZ,WAAW,CAACY,IAAI,CAAC,CAAD,CAAL,CAAX,CACH,CAJD,EAIGC,KAJH,CAIS,SAAUC,GAAV,CAAe,CACpBR,OAAO,CAACC,GAAR,CAAYO,GAAZ,EACH,CAND,EAOH,CACJ,CAVQ,CAUN,CAACX,WAAD,CAAcD,QAAd,CAVM,CAAT,CAYA,GAAMa,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,CAC3B;AACA,MAAOd,CAAAA,UAAU,CAACe,GAAX,CAAe,SAACC,KAAD,CAAQC,KAAR,CAAkB,CACpC,mBAAQ,eAAoB,SAAS,CAAE,0BAA/B,UAA4DD,KAA5D,EAAaC,KAAb,CAAR,CACH,CAFM,CAAP,CAGH,CALD,CAOA,GAAMC,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CAACC,KAAD,CAAW,CACrC;AACA7B,KAAK,CAACW,QAAN,CAAe,CAAEmB,IAAI,CAAE,uBAAR,CAAiCC,QAAQ,CAAEF,KAA3C,CAAf,EACAxB,oBAAoB,CAACwB,KAAD,CAApB,CACH,CAJD,CAMA;AACA;AACA,mBAAO,kCACH,yDAAuB,eAAQ,SAAS,CAAC,oDAAlB,CAAuE,KAAK,CAAEzB,iBAA9E,CAAiG,QAAQ,CAAE,kBAAA4B,KAAK,QAAIJ,CAAAA,qBAAqB,CAACI,KAAK,CAACC,MAAN,CAAaJ,KAAd,CAAzB,EAAhH,UACtBL,gBAAgB,EADM,EAAvB,QAEchB,QAFd,cADG,EAAP,CAKH,CArDD,CAuDA,cAAeN,CAAAA,WAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport store from '../redux/store';\n\nimport { newPageSize } from '../redux/features/referenceSlice';\n\nconst TableHeader = (props) => {\n    const [selectedPageLimit, setSelectedPageLimit] = useState(25);\n    const [isLoaded, setIsLoaded]                   = useState(false);\n    const [aggCount, setAggCount]                   = useState('XXX');\n    // const [reference, setReference]                 = useState(null);\n\n    // is never going to change\n    const pageLimits = [10, 25, 50, 75, 100, 200];\n\n    const dispatch = useDispatch();\n    // NOTE: whole state currently?\n    const storedState = useSelector(state => state.reference);\n\n\n    // component mounted\n    useEffect(() => {\n        // do nothing currently since has to wait for reference to resolve\n        console.log(\"Table header mounted\");\n    }, []);\n\n    // when reference store variable is set or changes, make request to fetch agg count\n    useEffect(() => {\n        if (storedState && storedState.reference) {\n            storedState.reference.getAggregates([storedState.reference.aggregate.countAgg]).then(function (data) {\n                console.log(\"aggreggate count: \", data);\n\n                setAggCount(data[0]);\n            }).catch(function (err) {\n                console.log(err)\n            });\n        }\n    }, [storedState, dispatch]);\n\n    const renderPageLimits = () => {\n        // <span className={\"glyphicon pull-right \" + this.state.selectedPageLimit === limit ? 'glyphicon-ok' : 'glyphicon-invisible'}></span>\n        return pageLimits.map((limit, index) => {\n            return (<option key={index} className={\"page-size-limit-${limit}\"}>{limit}</option>)\n        })\n    }\n\n    const handlePageLimitChange = (value) => {\n        // dispatch to store that reference should be reread\n        store.dispatch({ type: \"reference/newPageSize\", pageSize: value });\n        setSelectedPageLimit(value);\n    }\n\n    // TODO: replace select\n    // <span className=\"caret\"></span>\n    return(<div>\n        <span>Displaying first <select className=\"page-size-dropdown chaise-btn chaise-btn-secondary\" value={selectedPageLimit} onChange={event => handlePageLimitChange(event.target.value)}>\n        {renderPageLimits()}\n        </select> of {aggCount} records</span>\n    </div>);\n}\n\nexport default TableHeader;\n"]},"metadata":{},"sourceType":"module"}